<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="UnknownMotherGoose"><meta name="Keywords" content="UnknownMotherGoose"><meta name="Robots" contect="all"><meta name="google-site-verification" content="-JpC1LgBb47SU_CHMdZx7RdIvgfMrnAKoHB_UlroSFM"><title>ローリンガール - Unkwn</title><link rel="Bookmark" type="image/x-icon" href="/img/favicon.ico"><link rel="icon" type="image/x-icon" href="/img/favicon.ico"><link rel="shortcut icon" type="image/x-icon" href="/img/favicon.ico"><link rel="stylesheet" href="/js/prism/prism.css"><link rel="stylesheet" href="/css/style.css"><script src="https://cdn.staticfile.org/jquery/3.6.4/jquery.min.js"></script><script src="/js/theme.js"></script><script src="/js/miku.js"></script><meta name="generator" content="Hexo 6.3.0"></head><body><header><div class="header" id="header"><div class="logo"><a href="/" class="title">UnknownMotherGoose</a></div><div id="nav_top" class="nav_top"><ul id="menu_tip"><li id="menu_item"><a href="/archives" class="archives">Archive</a></li><li id="menu_item"><a href="/about" class="about">About</a></li></ul></div></div></header><div class="mainbody"><div class="page"><header class="page_title">ローリンガール</header><div class="post_meta"><time class="post_time" id="post_time">2023-03-25</time></div><div class="post_content"><p>——我翻滚也要翻滚到你的面前。</p><span id="more"></span><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="298" height="52" src="//music.163.com/outchain/player?type=2&amp;id=22699098&amp;auto=0&amp;height=32"></iframe><p><img src="/%E3%83%AD%E3%83%BC%E3%83%AA%E3%83%B3%E3%82%AC%E3%83%BC%E3%83%AB/work.jpg" alt="mikuRunFast"></p><h2 id="《RollingGirl》，堂堂立项-绝对不咕"><a href="#《RollingGirl》，堂堂立项-绝对不咕" class="headerlink" title="《RollingGirl》，堂堂立项 绝对不咕"></a>《RollingGirl》，堂堂立项 <del>绝对不咕</del></h2><h2 id="Step1-找个模型"><a href="#Step1-找个模型" class="headerlink" title="Step1:找个模型"></a>Step1:找个模型</h2><p>google输入miku模型，随意挑一个喜欢的就好。</p><h2 id="Step2-弄进CC里边去"><a href="#Step2-弄进CC里边去" class="headerlink" title="Step2:弄进CC里边去"></a>Step2:弄进CC里边去</h2><p>这部分挺扯淡的，因为能找到的miku模型好多都是mmd的，这时候有一大堆问题需要处理的。最后放弃了，即使是最简单的<a target="_blank" rel="noopener" href="https://space.bilibili.com/1688240/dynamic">YYB Hatsune Miku_default_3</a> 都有80M+的体积，面数还死多。行，那我就自己做一个吧。</p><h2 id="Step3-自己设计一个Q版miku"><a href="#Step3-自己设计一个Q版miku" class="headerlink" title="Step3:自己设计一个Q版miku"></a>Step3:自己设计一个Q版miku</h2><p>打开体素工具<a target="_blank" rel="noopener" href="https://ephtracy.github.io/">MagicaVoxel</a>，开干。</p><p>经过一系列的拙劣的模仿，终于弄出来一个像样的……fufu？</p><p><img src="/%E3%83%AD%E3%83%BC%E3%83%AA%E3%83%B3%E3%82%AC%E3%83%BC%E3%83%AB/fufu1.jpg" alt="mikuRunFast"></p><p><img src="/%E3%83%AD%E3%83%BC%E3%83%AA%E3%83%B3%E3%82%AC%E3%83%BC%E3%83%AB/fufu2.jpg" alt="mikuRunFast"></p><p><a href="mikuQ.vox">源文件</a>也放出来供各位使用吧。</p><h2 id="Step4-先弄进Unity里边去"><a href="#Step4-先弄进Unity里边去" class="headerlink" title="Step4:先弄进Unity里边去"></a>Step4:先弄进Unity里边去</h2><p>怎么弄呢？很简单，直接导——个鬼哟，还要绑骨骼刷权重呢。这时候就应该使出钞能力。<br>购买这个插件<a href="voxel-importer">voxel-importer</a>，至于插件，还是自己购买吧。我就不分享了。<br>然后就是按照教程一步一步生成，绑定骨骼，刷权重。（这两头发刷起来真恶心）<br>然后记得先保存成预设，这时候就可以使用unity的插件导出FBX。</p><h2 id="Step5-新问题，texture2d是什么东西？"><a href="#Step5-新问题，texture2d是什么东西？" class="headerlink" title="Step5:新问题，texture2d是什么东西？"></a>Step5:新问题，texture2d是什么东西？</h2><p>emmm，cc不支持texture2d格式啊，那么写个代码转一下吧。</p><pre class="line-numbers language-Csharp" data-language="Csharp"><div class="caption"><span>Texture2D_IMG.cs</span></div><code class="language-Csharp">using System.Collections;
using System.Collections.Generic;
using System.IO;
using UnityEditor;
using UnityEngine;

public class Texture2D_IMG : MonoBehaviour
{

    public Texture2D texture2D;

    string path = "";
    void Start()
    {
        saveTexture2D(texture2D);
    }

    public void saveTexture2D(Texture2D texture)
    {
        path = AssetDatabase.GetAssetPath(texture);
        if (!string.IsNullOrEmpty(path) &amp;&amp; File.Exists(path))
        {
            path = Path.GetDirectoryName(path);
        }
        else
        {
            path = Application.dataPath;
        }
        byte[] bytes = texture.EncodeToPNG();
        Debug.Log(path);
        string name = texture.name;
        // UnityEngine.Object.Destroy(texture);
        System.IO.File.WriteAllBytes(path + "/" + name + ".png", bytes);
        Debug.Log("write to File over");
        UnityEditor.AssetDatabase.Refresh(); //自动刷新资源
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>然后把导出来的图片丢进PS里边，选择图像-图像大小-硬边缘，并且放大一点。虽然说有误差，（有些边缘被不正常地放大缩小了，但是起码不模糊了）</p><h2 id="Step6-好的，现在准备一下动画"><a href="#Step6-好的，现在准备一下动画" class="headerlink" title="Step6:好的，现在准备一下动画"></a>Step6:好的，现在准备一下动画</h2><p>直接去<a target="_blank" rel="noopener" href="https://www.mixamo.com/">mixamo</a>白嫖就好，记得挂梯子。<br>如果提示失败什么的，多上传几次fbx模型就好。<br>PS:下载动画的时候选择without skin。<br>然后就是导入unity，放好并且编辑好动画（其他编辑器太烂了。）<br>然后重新导出为FBX。</p><p><img src="/%E3%83%AD%E3%83%BC%E3%83%AA%E3%83%B3%E3%82%AC%E3%83%BC%E3%83%AB/runfast.jpg" alt="mikuRunFast"></p><h2 id="Step7-导入到CC"><a href="#Step7-导入到CC" class="headerlink" title="Step7:导入到CC"></a>Step7:导入到CC</h2><p>这一步很简单，但是我不了解CC，还是先去看一遍文档吧。<br>好，看得我一头雾水，顺带学习了一下TS的非空断言</p><pre class="line-numbers language-typescript" data-language="typescript"><div class="caption"><span>function isValid</span></div><code class="language-typescript"><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">isValid</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> x <span class="token keyword">is</span> NotNil<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span> x <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span>y<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isValid</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> y<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 此时 y 不会提示报错。因为被 isValid 断言非空</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token string">''</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">NotNil<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token keyword">null</span></span> <span class="token operator">|</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> <span class="token builtin">never</span> <span class="token operator">:</span> <span class="token constant">T</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://juejin.cn/post/7076293418988601375" alt="链接"><br>cc 和 laya区别挺大的，但是cc似乎比laya好很多很多。<br>加把劲，我今天也要学习cc<br>cc这边的加载,一时半会没理解。确实比较蛋疼的。<br>折腾了下，添加了页面管理器，加载器什么的写到一半写不下去了。<br>然后还添加了miku。<br>可能miku后面还要更改，因为没有表情。<br>顺手做个gif</p><p><img src="/%E3%83%AD%E3%83%BC%E3%83%AA%E3%83%B3%E3%82%AC%E3%83%BC%E3%83%AB/mikuRun.gif" alt="mikuRunFast"></p><p>然后写了一堆工具，一堆脚本，当前只是暂时把主角放在了主界面，并且展示了出来。</p><p>目前来说，遇到了一些别的问题。</p><h2 id="Step7-算法以及设计"><a href="#Step7-算法以及设计" class="headerlink" title="Step7:算法以及设计"></a>Step7:算法以及设计</h2><p>就当前代码的实现上面，目前没有大问题，都是需要时间实现，当前的需求是一种算法，用以随机生成迷宫。<br>当我看到网上各种复杂的算法时候，我又想到另外一件重要的事情，游戏的具体玩法是什么。<br>对，游戏的具体玩法并没确定下来，我只是确定了核心玩法，仍旧需要扩展。<br>这时候需要一个头脑风暴，以及……设计思路。<br>我暂时没有，我觉得我需要去看看视频。<br>勉强对着格式写了份策划案，果然，写策划案的时候又冒出了挺多灵感，暂时制定了一份策划案，虽然看起来不怎么成熟，但是起码对于我个人来说，是更加清晰未来游戏需要做什么了。<br>依旧对地图生成算法这块头疼啊。<br>在问题解决之前，估计项目要搁置很久了。</p><h2 id="Step8-设计迷宫算法"><a href="#Step8-设计迷宫算法" class="headerlink" title="Step8:设计迷宫算法"></a>Step8:设计迷宫算法</h2><p>花了点时间，看了下迷宫算法的原理。</p><p>然后在unity里边实践了一下。</p><p>首先尝试了递归回溯算法，小型迷宫看起来还成，在生成大型迷宫的时候就很扯淡了。</p><p>接下来实现了一遍prim算法，效果拔群，于是重写了一次。算是“看起来”比较好看。</p><p>迷宫算法是写好，接下来要生成我需要的地图，还要写各种判断，也很恶心。</p><p>题外话：总有人说，不要造轮子，那是在项目赶进度/你有能力造轮子的情况下才这么说的，很明显，没人催我进度，我也乐得研究下轮子怎么造。</p><p>这也算我的优点之一：有旺盛的好奇心，从而能看透很大一部分表象的本质。</p></div></div><div class="guide_pager"><a class="page_prev" href="/%E5%8F%A4%E7%90%B4%E3%80%8A%E5%8D%8A%E5%B1%B1%E5%90%AC%E9%9B%A8%E3%80%8B/">&lt; 古琴《半山听雨》 </a><a class="page_next" href="/%E6%B5%B7%E9%98%94%E5%A4%A9%E7%A9%BA/">海阔天空 &gt;</a></div></div><footer><div class="footer"><div class="verse">山有木兮木有枝，心悦君兮君不知。</div><span class="copyright_year">©️ 2022- 2023 <span class="footer_author">NoRain</span> <span class="power_by">Powered by <a class="hexo_link" target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a> and <a class="theme_link" target="_blank" rel="noopener" href="https://github.com/NoRainLand">NoRainLand</a></span></span></div></footer><div class="back_to_top" id="back_to_top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="arrow_up"><line x1="12" y1="19" x2="12" y2="5"></line><polyline points="5 12 12 5 19 12"></polyline></svg></div><script src="/js/bootstrap.js"></script><script src="/js/prism/prism.js"></script><script type="text/javascript" charset="utf-8" src="/js/lazyload-plugin/lazyload.intersectionObserver.min.js"></script></body></html>